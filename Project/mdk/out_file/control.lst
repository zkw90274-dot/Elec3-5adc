C251 COMPILER V5.60.0,  control                                                            14/01/26  23:11:45  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE control
OBJECT MODULE PLACED IN .\out_file\control.obj
COMPILER INVOKED BY: E:\Tools\keil5\Keil_v5\C251\BIN\C251.EXE ..\code\control.c LARGE NOALIAS WARNINGLEVEL(3) OPTIMIZE(S
                    -IZE) BROWSE INCDIR(..\..\libraries\zf_common;..\..\libraries\zf_components;..\..\libraries\zf_device;..\..\libraries\zf_
                    -driver;..\user;..\code) DEBUG PRINT(.\out_file\control.lst) TABS(2) OBJECT(.\out_file\control.obj) 

stmt  level    source

    1          #include "control.h"
    2          
    3          
    4          // 全局变量定义
    5          SDSD_param_t SDSD;
    6          int32 sub;    // 差值
    7          int32 sum;    // 和值
    8          float res;    // 结果值
    9          
   10          
   11          
   12          
   13          
   14          //-------------------------------------------------------------------------------------------------------
             -------------
   15          // 函数简介     差比和差参数初始化
   16          // 参数说明     SDSD            差比和差结构体指针
   17          // 参数说明     A               水平系数(系数A)
   18          // 参数说明     B               垂直系数(系数B)
   19          // 参数说明     C               垂直系数(系数C)
   20          // 返回参数     void
   21          // 使用示例     SDSD_init(&SDSD, 1.0, 1.0, 1.0);
   22          // 备注信息
   23          //-------------------------------------------------------------------------------------------------------
             -------------
   24          void SDSD_init(SDSD_param_t *SDSD, float A, float B, float C)
   25          {
   26   1          SDSD->parallel_err_A = A;
   27   1          SDSD->vertical_err_B = B;
   28   1          SDSD->vertival_err_C = C;
   29   1      }
   30          
   31          //-------------------------------------------------------------------------------------------------------
             -------------
   32          // 函数简介     差比和差计算
   33          // 参数说明     SDSD            差比和差结构体指针
   34          // 返回参数     float           差比和差计算结果
   35          // 使用示例     float result = SDSD_calculate(&SDSD);
   36          // 备注信息     计算差比和差值用于循迹控制
   37          //-------------------------------------------------------------------------------------------------------
             -------------
   38          float SDSD_calculate(SDSD_param_t *SDSD)
   39          {
   40   1          sub = (SDSD->parallel_err_A * (adc_normalized_list[1] - adc_normalized_list[7]) +
   41   1                 SDSD->vertical_err_B * (adc_normalized_list[2] - adc_normalized_list[6])) * 100;
   42   1      
   43   1          sum = SDSD->parallel_err_A * (adc_normalized_list[1] - adc_normalized_list[7]) +
   44   1                SDSD->vertival_err_C * abs(adc_normalized_list[2] - adc_normalized_list[6]) + 1;
   45   1      
   46   1          res = sub / sum;
   47   1      
   48   1          if(res > SDSD_MAX)
   49   1              res = SDSD_MAX;
   50   1          else if(res < SDSD_MIN)
   51   1              res = SDSD_MIN;
   52   1      
   53   1          return res;
C251 COMPILER V5.60.0,  control                                                            14/01/26  23:11:45  PAGE 2   

   54   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       313     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =        24          8
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =    ------     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
