C251 COMPILER V5.60.0,  control                                                            18/01/26  23:59:59  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE control
OBJECT MODULE PLACED IN .\out_file\control.obj
COMPILER INVOKED BY: E:\Tools\keil5\Keil_v5\C251\BIN\C251.EXE ..\code\control.c LARGE NOALIAS WARNINGLEVEL(3) OPTIMIZE(S
                    -IZE) BROWSE INCDIR(..\..\libraries\zf_common;..\..\libraries\zf_components;..\..\libraries\zf_device;..\..\libraries\zf_
                    -driver;..\user;..\code) DEBUG PRINT(.\out_file\control.lst) TABS(2) OBJECT(.\out_file\control.obj) 

stmt  level    source

    1          #include "control.h"
    2          
    3          // 全局变量定义
    4          SDSD_param_t SDSD;
    5          int32 sub;    // 差值
    6          int32 sum;    // 和值
    7          float res;    // 结果值
    8          
    9          //-------------------------------------------------------------------------------------------------------
             -------------
   10          // 函数简介     差比和差参数初始化
   11          // 参数说明     SDSD            差比和差结构体指针
   12          // 参数说明     A               水平系数(系数A)
   13          // 参数说明     B               垂直系数(系数B)
   14          // 参数说明     C               垂直系数(系数C)
   15          // 返回参数     void
   16          // 使用示例     SDSD_init(&SDSD, 1.0, 1.0, 1.0);
   17          //-------------------------------------------------------------------------------------------------------
             -------------
   18          void SDSD_init(SDSD_param_t *SDSD, float A, float B, float C)
   19          {
   20   1          SDSD->parallel_err_A = A;
   21   1          SDSD->vertical_err_B = B;
   22   1          SDSD->vertival_err_C = C;
   23   1      }
   24          
   25          //-------------------------------------------------------------------------------------------------------
             -------------
   26          // 函数简介     差比和差计算
   27          // 参数说明     SDSD            差比和差结构体指针
   28          // 返回参数     float           差比和差计算结果
   29          // 使用示例     float result = SDSD_calculate(&SDSD);
   30          // 备注信息     计算差比和差值用于循迹控制
   31          //-------------------------------------------------------------------------------------------------------
             -------------
   32          float SDSD_calculate(SDSD_param_t *SDSD)
   33          {
   34   1          sub = (SDSD->parallel_err_A * (adc_normalized_list[1] - adc_normalized_list[7]) +
   35   1                 SDSD->vertical_err_B * (adc_normalized_list[2] - adc_normalized_list[6])) * 100;
   36   1      
   37   1          sum = SDSD->parallel_err_A * (adc_normalized_list[1] - adc_normalized_list[7]) +
   38   1                SDSD->vertival_err_C * abs(adc_normalized_list[2] - adc_normalized_list[6]) + 1;
   39   1      
   40   1          res = sub / sum;
   41   1      
   42   1          if(res > SDSD_MAX)
   43   1              res = SDSD_MAX;
   44   1          else if(res < SDSD_MIN)
   45   1              res = SDSD_MIN;
   46   1      
   47   1          return res;
   48   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       313     ------
  ecode size           =    ------     ------
C251 COMPILER V5.60.0,  control                                                            18/01/26  23:59:59  PAGE 2   

  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =        24          8
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =    ------     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
